<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verse: AI ChatBot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/style.css">
</head>
<body class="bg-slate-100 text-slate-800 flex h-screen overflow-hidden antialiased">

    <!-- Auth Modal (Hidden by default) -->
    <div id="auth-modal" class="fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white w-full max-w-sm rounded-2xl p-8 text-center shadow-2xl transform transition-all scale-95 opacity-0" id="auth-modal-content">
            <h2 class="text-2xl font-bold text-slate-800 mb-2">Welcome to Verse</h2>
            <p class="text-slate-500 mb-8">Please sign in to continue your conversation.</p>
            <button id="google-signin-btn" class="w-full flex items-center justify-center gap-3 bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl hover:bg-blue-500 transition-all duration-300 shadow-lg shadow-blue-600/20">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><defs><path id="a" d="M44.5 20H24v8.5h11.8C34.7 33.9 30.1 37 24 37c-7.2 0-13-5.8-13-13s5.8-13 13-13c3.1 0 5.9 1.1 8.1 2.9l6.4-6.4C34.6 4.1 29.6 2 24 2 11.8 2 2 11.8 2 24s9.8 22 22 22c11 0 21-8 21-22 0-1.3-.2-2.7-.5-4z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" fill="#FBBC05" d="M0 37V11l17 13z"/><path clip-path="url(#b)" fill="#EA4335" d="M0 11l17 13 7-6.1L48 14V0H0z"/><path clip-path="url(#b)" fill="#34A853" d="M0 37l30-23.5 7.7 6.1L48 34V48H0z"/><path clip-path="url(#b)" fill="#4285F4" d="M48 48L17 24l-4-3 35-10z"/></svg>
                Sign In with Google
            </button>
            <p id="auth-error" class="text-red-500 text-sm mt-4 h-5"></p>
        </div>
    </div>


    <!-- Global Container -->
    <div class="flex w-full h-full">

        <!-- Sidebar (Chat List) -->
        <aside id="sidebar" class="bg-[#0D1A2E] w-[calc(100%-4rem)] max-w-[320px] h-full flex flex-col p-4 fixed lg:static z-20 -translate-x-full lg:translate-x-0 sidebar">
            <!-- Sidebar Header -->
            <div class="flex items-center justify-between pb-4">
                <h1 class="text-2xl font-bold text-white tracking-wide">Verse</h1>
                <button id="new-chat-btn" class="flex items-center gap-2 px-4 py-2 text-sm font-semibold bg-blue-600 text-white hover:bg-blue-500 rounded-full transition-all duration-300 shadow-lg shadow-blue-600/20">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
                    New Chat
                </button>
            </div>
            
            <!-- Search Bar -->
            <div class="relative mb-4">
                <input type="text" placeholder="Search..." class="w-full bg-[#1C2A3E] border border-slate-700 rounded-full py-2.5 pl-10 pr-4 text-sm text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all">
                <svg class="absolute left-3.5 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
            </div>

            <!-- Chat List -->
            <nav id="chat-list" class="flex-1 overflow-y-auto -mr-2 pr-2">
                <!-- Chat items will be dynamically inserted here -->
            </nav>

            <!-- User Profile / Sign In -->
            <div id="user-profile-container" class="mt-auto pt-4 border-t border-slate-700/50">
                 <!-- This will be populated by app.js -->
            </div>
        </aside>

        <!-- Main Content (Chat Window) -->
        <main id="main-content" class="flex-1 flex flex-col h-full bg-slate-100 transition-all duration-300">
            <!-- Topbar -->
            <header class="flex items-center justify-between p-3 sm:p-4 border-b border-slate-200 w-full bg-slate-100/80 backdrop-blur-sm">
                <div class="flex items-center gap-2 sm:gap-3">
                    <button id="menu-btn" class="lg:hidden p-2 rounded-full text-slate-600 hover:bg-slate-200">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
                    </button>
                    <h2 id="chat-title" class="text-base sm:text-lg font-semibold text-slate-900 truncate">New Conversation</h2>
                </div>
                <div class="flex items-center gap-1 sm:gap-2">
                    <button id="summarize-chat-btn" title="✨ Summarize Chat" class="flex items-center gap-2 p-2 sm:px-3 bg-white text-slate-600 hover:text-blue-600 hover:bg-slate-50 border border-slate-200 rounded-full transition-colors shadow-sm text-sm font-semibold">
                        <span>✨</span>
                        <span class="hidden sm:inline">Summarize</span>
                    </button>
                    <button class="p-2 rounded-full text-slate-500 hover:bg-slate-200 hover:text-slate-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
                    </button>
                    <button class="p-2 rounded-full text-slate-500 hover:bg-slate-200 hover:text-slate-800 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                    </button>
                </div>
            </header>
            
            <!-- Initial Prompt View -->
            <div id="initial-prompt-container" class="flex-1 flex flex-col items-center justify-center p-4 sm:p-6 text-center">
                 <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-slate-800 tracking-tight">Where should we begin?</h1>
                 <form id="initial-chat-form" class="relative mt-8 w-full max-w-md sm:max-w-2xl">
                     <textarea id="initial-prompt-input" placeholder="Ask me to write, create, or explain anything..." class="w-full bg-white p-4 pr-14 sm:pr-16 text-base sm:text-lg resize-none focus:outline-none placeholder-slate-400 rounded-2xl shadow-lg border border-slate-200 transition-all duration-300 focus:ring-2 focus:ring-blue-500" rows="2"></textarea>
                     <button type="submit" class="absolute right-2 sm:right-3 top-1/2 -translate-y-1/2 p-2 sm:p-3 bg-blue-600 text-white rounded-full hover:bg-blue-500 transition-all duration-300 shadow-lg shadow-blue-600/20 hover:scale-110">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 sm:w-6 sm:h-6 transform -rotate-45 -translate-x-px translate-y-px"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                     </button>
                 </form>

                 <div class="mt-6 w-full max-w-2xl flex flex-col sm:flex-row items-stretch sm:items-center justify-center gap-2 sm:gap-4 relative">
                    <div id="initial-image-preview-container" class="absolute bottom-full mb-2"></div>
                    <button type="button" id="initial-image-upload-btn" title="Upload image" class="flex items-center justify-center gap-2 p-2 px-4 bg-white text-slate-600 hover:text-blue-600 hover:bg-slate-50 border border-slate-200 rounded-full transition-colors shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                        Attach Image
                    </button>
                    <button type="button" id="initial-customize-btn" title="Customize response" class="flex items-center justify-center gap-2 p-2 px-4 bg-white text-slate-600 hover:text-blue-600 hover:bg-slate-50 border border-slate-200 rounded-full transition-colors shadow-sm">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="14 2 18 6 7 17 3 17 3 13 14 2"/><line x1="3" y1="22" x2="21" y2="22"/></svg>
                        Customize
                    </button>
                    <div id="initial-customization-popover" class="customization-popover absolute w-[90vw] max-w-xs sm:max-w-xs bg-white border border-slate-200 rounded-2xl p-4 shadow-2xl shadow-slate-400/20 left-1/2 -translate-x-1/2 sm:left-auto sm:-translate-x-0" style="bottom: 100%; margin-bottom: 1rem;">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Length</label>
                            <div id="initial-length-options" class="flex gap-2">
                                <button data-value="Short" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Short</button>
                                <button data-value="Medium" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors active">Medium</button>
                                <button data-value="Large" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Large</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Tone</label>
                            <div id="initial-tone-options" class="flex gap-2">
                                <button data-value="Professional" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors active">Professional</button>
                                <button data-value="Casual" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Casual</button>
                                <button data-value="Creative" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Creative</button>
                            </div>
                        </div>
                    </div>
                 </div>
            </div>

            <!-- Message Feed -->
            <div id="message-feed" class="flex-1 overflow-y-auto p-4 sm:p-6 space-y-6 sm:space-y-8 hidden">
                <!-- Messages will be rendered here -->
            </div>
            
            <!-- Stop Generation Button (hidden by default) -->
            <div id="stop-generation-container" class="text-center py-3 hidden">
                <button id="stop-generation-btn" class="px-4 py-2 text-sm font-semibold border border-slate-300 bg-white hover:bg-slate-50 text-slate-600 rounded-full flex items-center gap-2 mx-auto shadow-sm">
                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h12v12H6z"/></svg>
                    Stop Generating
                </button>
            </div>

            <!-- Composer -->
            <div id="composer-container" class="w-full max-w-4xl mx-auto px-4 pb-4 sm:px-6 sm:pb-6 hidden">
                 <div id="customization-container" class="relative flex justify-end">
                    <div id="customization-popover" class="customization-popover absolute w-[90vw] max-w-xs sm:max-w-xs bg-white border border-slate-200 rounded-2xl p-4 shadow-2xl shadow-slate-400/20 right-0 sm:right-auto">
                        <div class="mb-4">
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Length</label>
                            <div id="length-options" class="flex gap-2">
                                <button data-value="Short" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Short</button>
                                <button data-value="Medium" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors active">Medium</button>
                                <button data-value="Large" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Large</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-700">Tone</label>
                            <div id="tone-options" class="flex gap-2">
                                <button data-value="Professional" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors active">Professional</button>
                                <button data-value="Casual" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Casual</button>
                                <button data-value="Creative" class="flex-1 text-sm py-1.5 px-3 rounded-lg bg-slate-100 text-slate-700 hover:bg-slate-200 transition-colors">Creative</button>
                            </div>
                        </div>
                    </div>
                </div>

                <form id="chat-form" class="relative flex items-center gap-2 p-2 bg-white/80 backdrop-blur-md rounded-3xl shadow-lg shadow-slate-400/10 border border-slate-200">
                     <button type="button" id="image-upload-btn" title="Upload image" class="flex-shrink-0 p-2 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded-full transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                     </button>
                     <input type="file" id="image-upload-input" class="hidden" accept="image/*">

                     <button type="button" id="customize-btn" title="Customize response" class="flex-shrink-0 p-2 text-slate-500 hover:text-blue-600 hover:bg-slate-100 rounded-full transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="14 2 18 6 7 17 3 17 3 13 14 2"/><line x1="3" y1="22" x2="21" y2="22"/></svg>
                    </button>
                    <div class="flex-1 relative">
                        <div id="image-preview-container" class="absolute bottom-full left-0 w-full p-2 hidden">
                        </div>
                        <textarea id="prompt-input" placeholder="Ask Verse anything..." class="w-full bg-transparent py-2 px-3 text-base resize-none focus:outline-none placeholder-slate-400" rows="1"></textarea>
                    </div>
                    <button type="submit" class="flex-shrink-0 p-3 bg-blue-600 text-white rounded-full hover:bg-blue-500 disabled:bg-slate-300 transition-all duration-300 shadow-lg shadow-blue-600/20 hover:scale-110">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="transform -rotate-45 -translate-x-px translate-y-px"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
                    </button>
                </form>
                 <p class="text-xs text-center text-slate-500 pt-3">Verse can make mistakes. Please verify important information.</p>
            </div>
        </main>
    </div>

    <div id="sidebar-overlay" class="fixed inset-0 bg-black/60 z-10 hidden lg:hidden"></div>

    <!-- Main App Logic -->
    <script type="module" src="/src/app.js"></script>
</body>
</html>

